<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Image to ASCII Converter</title>
  <!--
  ---
  id: image-ascii-converter-016
  title: Image to ASCII Converter
  description: Convert images to ASCII art with adjustable character sets, resolution, and color modes for creating text-based representations.
  category: image-processing
  tags: [ascii-art, image, converter, text, processing, tool]
  difficulty: intermediate
  author: Josh Mu
  created: 2025-01-26
  updated: 2025-01-26
  estimatedTime: 45 mins
  prerequisites: [Canvas API, Image processing, Character mapping]
  learningObjectives:
    - Process image data
    - Map brightness to characters
    - Handle file uploads
    - Create ASCII representations
  ---
  -->
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #1a1a1a;
      color: #e5e5e5;
      min-height: 100vh;
      padding: 2rem;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      margin-bottom: 2rem;
    }

    h1 {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
      color: #60a5fa;
    }

    .subtitle {
      color: #888;
    }

    .controls {
      background: #222;
      padding: 1.5rem;
      border-radius: 1rem;
      margin-bottom: 2rem;
    }

    .control-row {
      display: flex;
      gap: 1rem;
      margin-bottom: 1rem;
      flex-wrap: wrap;
      align-items: center;
    }

    .control-group {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    label {
      font-weight: 600;
      color: #60a5fa;
    }

    input[type="file"] {
      display: none;
    }

    .file-label {
      padding: 0.75rem 1.5rem;
      border-radius: 0.5rem;
      background: #60a5fa;
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .file-label:hover {
      background: #3b82f6;
    }

    input[type="range"] {
      width: 150px;
    }

    select, input[type="number"] {
      padding: 0.5rem;
      border: 2px solid #333;
      border-radius: 0.25rem;
      background: #2a2a2a;
      color: #e5e5e5;
    }

    .btn {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 0.5rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-primary {
      background: #60a5fa;
      color: white;
    }

    .btn-primary:hover {
      background: #3b82f6;
    }

    .btn-secondary {
      background: #333;
      color: #e5e5e5;
    }

    .btn-secondary:hover {
      background: #444;
    }

    .content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
    }

    .panel {
      background: #222;
      padding: 1.5rem;
      border-radius: 1rem;
    }

    .panel h2 {
      font-size: 1.25rem;
      margin-bottom: 1rem;
      color: #60a5fa;
    }

    canvas {
      width: 100%;
      border: 2px solid #333;
      border-radius: 0.5rem;
    }

    .ascii-output {
      font-family: 'Courier New', monospace;
      font-size: 8px;
      line-height: 8px;
      white-space: pre;
      overflow: auto;
      background: #1a1a1a;
      padding: 1rem;
      border-radius: 0.5rem;
      max-height: 600px;
    }

    .color-mode .ascii-output {
      color: transparent;
      background-clip: text;
      -webkit-background-clip: text;
    }

    @media (max-width: 1024px) {
      .content {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Image to ASCII Converter</h1>
      <p class="subtitle">Transform images into text art</p>
    </div>

    <div class="controls">
      <div class="control-row">
        <label for="fileInput" class="file-label">Choose Image</label>
        <input type="file" id="fileInput" accept="image/*">
        <span id="fileName">No file chosen</span>
      </div>

      <div class="control-row">
        <div class="control-group">
          <label>Width:</label>
          <input type="range" id="widthSlider" min="50" max="200" value="100">
          <span id="widthValue">100</span>
        </div>

        <div class="control-group">
          <label>Character Set:</label>
          <select id="charSetSelect">
            <option value="simple">Simple: @%#*+=-:. </option>
            <option value="detailed" selected>Detailed: $@B%8&WM#*oahkbdpqwmZO0QLCJUYXzcvunxrjft/\|()1{}[]?-_+~i!lI;:,\"^`'. </option>
            <option value="blocks">Blocks: █▓▒░ </option>
          </select>
        </div>

        <div class="control-group">
          <label>Mode:</label>
          <select id="colorMode">
            <option value="mono">Monochrome</option>
            <option value="color">Color</option>
          </select>
        </div>
      </div>

      <div class="control-row">
        <button class="btn btn-primary" id="convertBtn">Convert</button>
        <button class="btn btn-secondary" id="copyBtn">Copy ASCII</button>
        <button class="btn btn-secondary" id="downloadBtn">Download</button>
      </div>
    </div>

    <div class="content">
      <div class="panel">
        <h2>Original Image</h2>
        <canvas id="canvas"></canvas>
      </div>

      <div class="panel">
        <h2>ASCII Output</h2>
        <div id="asciiOutput" class="ascii-output">Upload an image to start...</div>
      </div>
    </div>
  </div>

  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    let currentImage = null;

    const charSets = {
      simple: '@%#*+=-:. ',
      detailed: '$@B%8&WM#*oahkbdpqwmZO0QLCJUYXzcvunxrjft/\\|()1{}[]?-_+~<>i!lI;:,"^`\'. ',
      blocks: '█▓▒░ '
    };

    function loadImage(file) {
      const reader = new FileReader();

      reader.onload = (e) => {
        const img = new Image();
        img.onload = () => {
          currentImage = img;
          const maxWidth = 600;
          const scale = maxWidth / img.width;
          canvas.width = img.width * scale;
          canvas.height = img.height * scale;

          ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
          document.getElementById('fileName').textContent = file.name;
          convertToASCII();
        };
        img.src = e.target.result;
      };

      reader.readAsDataURL(file);
    }

    function convertToASCII() {
      if (!currentImage) return;

      const width = parseInt(document.getElementById('widthSlider').value);
      const charSetKey = document.getElementById('charSetSelect').value;
      const colorMode = document.getElementById('colorMode').value;
      const charSet = charSets[charSetKey];

      // Calculate height to maintain aspect ratio
      const aspectRatio = currentImage.height / currentImage.width;
      const height = Math.floor(width * aspectRatio * 0.5); // 0.5 for character aspect ratio

      // Create temporary canvas for processing
      const tempCanvas = document.createElement('canvas');
      const tempCtx = tempCanvas.getContext('2d');
      tempCanvas.width = width;
      tempCanvas.height = height;

      tempCtx.drawImage(currentImage, 0, 0, width, height);
      const imageData = tempCtx.getImageData(0, 0, width, height);

      let ascii = '';
      const output = document.getElementById('asciiOutput');

      if (colorMode === 'color') {
        ascii = '<span style="display:inline-block;">';
        for (let y = 0; y < height; y++) {
          for (let x = 0; x < width; x++) {
            const i = (y * width + x) * 4;
            const r = imageData.data[i];
            const g = imageData.data[i + 1];
            const b = imageData.data[i + 2];

            const brightness = (r + g + b) / 3;
            const charIndex = Math.floor((brightness / 255) * (charSet.length - 1));
            const char = charSet[charSet.length - 1 - charIndex];

            ascii += `<span style="color:rgb(${r},${g},${b})">${char}</span>`;
          }
          ascii += '\n';
        }
        ascii += '</span>';
        output.innerHTML = ascii;
        output.classList.add('color-mode');
      } else {
        for (let y = 0; y < height; y++) {
          for (let x = 0; x < width; x++) {
            const i = (y * width + x) * 4;
            const r = imageData.data[i];
            const g = imageData.data[i + 1];
            const b = imageData.data[i + 2];

            const brightness = (r + g + b) / 3;
            const charIndex = Math.floor((brightness / 255) * (charSet.length - 1));
            ascii += charSet[charSet.length - 1 - charIndex];
          }
          ascii += '\n';
        }
        output.textContent = ascii;
        output.classList.remove('color-mode');
      }
    }

    function copyToClipboard() {
      const output = document.getElementById('asciiOutput');
      const text = output.textContent;

      navigator.clipboard.writeText(text).then(() => {
        const btn = document.getElementById('copyBtn');
        const originalText = btn.textContent;
        btn.textContent = 'Copied!';
        setTimeout(() => btn.textContent = originalText, 2000);
      });
    }

    function downloadASCII() {
      const output = document.getElementById('asciiOutput');
      const text = output.textContent;

      const blob = new Blob([text], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.download = 'ascii-art.txt';
      link.href = url;
      link.click();
      URL.revokeObjectURL(url);
    }

    // Event listeners
    document.getElementById('fileInput').addEventListener('change', (e) => {
      if (e.target.files.length > 0) {
        loadImage(e.target.files[0]);
      }
    });

    document.getElementById('widthSlider').addEventListener('input', (e) => {
      document.getElementById('widthValue').textContent = e.target.value;
    });

    document.getElementById('convertBtn').addEventListener('click', convertToASCII);
    document.getElementById('copyBtn').addEventListener('click', copyToClipboard);
    document.getElementById('downloadBtn').addEventListener('click', downloadASCII);

    // Auto-convert on settings change
    document.getElementById('charSetSelect').addEventListener('change', () => {
      if (currentImage) convertToASCII();
    });

    document.getElementById('colorMode').addEventListener('change', () => {
      if (currentImage) convertToASCII();
    });
  </script>
</body>
</html>
